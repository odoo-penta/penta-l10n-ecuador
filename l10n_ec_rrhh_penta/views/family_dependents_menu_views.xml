<?xml version="1.0" encoding="utf-8"?>
<odoo>

  <!-- Vista LIST -->
  <record id="view_family_dependents_tree" model="ir.ui.view">
    <field name="name">hr.employee.family.dependent.tree</field>
    <field name="model">l10n_ec.ptb.family.dependents</field>
    <field name="arch" type="xml">
      <list string="Cargas familiares" create="1" edit="1" delete="1">
        <field name="employee_id"/>
        <field name="vat"/>
        <field name="name"/>
        <field name="birthdate"/>
        <field name="gender"/>
        <field name="disability"/>
        <field name="relationship"/>
        <field name="use_for_income_tax"/>
        <field name="is_permanent_charge"/>
        <field name="age_years"/>
      </list>
    </field>
  </record>

  <!-- Vista SEARCH -->
  <record id="view_family_dependents_search" model="ir.ui.view">
    <field name="name">hr.employee.family.dependent.search</field>
    <field name="model">l10n_ec.ptb.family.dependents</field>
    <field name="arch" type="xml">
      <search string="Buscar cargas familiares">
        <field name="employee_id"/>
        <field name="name"/>
        <field name="relationship"/>
        <group expand="0" string="Agrupar por">
          <filter name="grp_employee" string="Empleado" context="{'group_by': 'employee_id'}"/>
          <filter name="grp_relationship" string="Relación" context="{'group_by': 'relationship'}"/>
        </group>
      </search>
    </field>
  </record>

  <!-- Acción -->
  <record id="action_family_dependents" model="ir.actions.act_window">
    <field name="name">Cargas familiares</field>
    <field name="res_model">l10n_ec.ptb.family.dependents</field>
    <field name="view_mode">list,form</field>
    <field name="search_view_id" ref="view_family_dependents_search"/>
    <field name="context">{}</field>
    <field name="help" type="html">
      <p>
        Desde esta lista puedes usar la <b>importación nativa de Odoo</b>
        (botón <i>Importar</i>) para cargar masivamente cargas familiares.
      </p>
    </field>
  </record>

  <!-- Menú: cuélgalo bajo RR.HH. -->
  <menuitem id="menu_family_dependents_root"
            name="Cargas familiares"
            parent="hr.menu_human_resources_configuration"
            action="action_family_dependents"
            sequence="10"/>

</odoo>
