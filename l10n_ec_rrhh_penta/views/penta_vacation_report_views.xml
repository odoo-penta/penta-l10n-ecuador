<?xml version="1.0" encoding="utf-8"?>
<odoo>

  <!-- Acción -->
  <record id="action_penta_vacation_report_wizard" model="ir.actions.act_window">
    <field name="name">Reporte de Vacaciones</field>
    <field name="res_model">penta.vacation.report.wizard</field>
    <field name="view_mode">form</field>
    <field name="target">new</field>
    <field name="context">{}</field>
  </record>

  <!-- Menú  -->
  <menuitem id="menu_penta_vacation_report"
            name="Reporte de Vacaciones"
            parent="hr_payroll.menu_hr_payroll_report"
            action="action_penta_vacation_report_wizard"
            sequence="25"/>

  <!-- LIST  -->
  <record id="view_penta_vacation_report_line_list" model="ir.ui.view">
    <field name="name">penta.vacation.report.line.list</field>
    <field name="model">penta.vacation.report.line</field>
    <field name="arch" type="xml">
      <list string="Detalle de Vacaciones" create="0" edit="0" delete="0">
        <field name="employee_name"/>
        <field name="identification"/>
        <field name="company_name"/>
        <field name="department_name"/>
        <field name="job_name"/>
        <field name="leave_type_name"/>
        <field name="allocated"/>
        <field name="taken"/>
        <field name="balance"/>
      </list>
    </field>
  </record>

  <!--  wizard -->
  <record id="view_penta_vacation_report_wizard_form" model="ir.ui.view">
    <field name="name">penta.vacation.report.wizard.form</field>
    <field name="model">penta.vacation.report.wizard</field>
    <field name="arch" type="xml">
      <form string="Reporte de Vacaciones">
        <group>
          <group>
            <field name="company_id"/>
            <field name="department_id" options="{'no_create_edit': True}"/>
          </group>
          <group>
            <field name="employee_ids" widget="many2many_tags" options="{'no_create_edit': True}"/>
            <field name="include_zero"/>
          </group>
        </group>

        <footer>
          <button string="Generar" type="object" name="action_generate" class="btn-primary"/>
          <button string="Exportar a Excel" type="object" name="action_export_xlsx" invisible="not line_ids"/>
          <button string="Cerrar" special="cancel" class="btn-secondary"/>
        </footer>

        <notebook>
          <page string="Resultados">
            <field name="line_ids" nolabel="1" context="{'no_open': True}">
              <list create="0" delete="0" edit="0">
                <field name="employee_name"/>
                <field name="identification"/>
                <field name="company_name"/>
                <field name="department_name"/>
                <field name="job_name"/>
                <field name="leave_type_name"/>
                <field name="allocated"/>
                <field name="taken"/>
                <field name="balance"/>
              </list>
            </field>
          </page>

          <page string="Descarga" invisible="not xlsx_file">
            <group>
              <field name="xlsx_filename" readonly="1"/>
              <field name="xlsx_file" filename="xlsx_filename" readonly="1"/>
            </group>
          </page>
        </notebook>
      </form>
    </field>
  </record>

</odoo>
