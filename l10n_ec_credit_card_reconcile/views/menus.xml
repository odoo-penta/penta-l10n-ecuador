<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- Acción: lista de CreditCardReconcile (list,form) -->
    <record id="action_credit_card_reconcile" model="ir.actions.act_window">
        <field name="name">Conciliación de Tarjetas de Crédito</field>
        <field name="res_model">credit.card.reconcile</field>
        <field name="view_mode">list,form</field>

    </record>

    <!-- Menú raíz "Conciliación" colgando de "account.menu_finance_entries" 
         (Menú de Contabilidad > Entradas) -->
    <menuitem id="menu_credit_card_reconcile_root"
              name="Conciliación"
              parent="account.menu_finance_entries"
              sequence="130"
              groups="account.group_account_invoice" />

    <!-- Acción para abrir la vista de conciliación de tarjetas de crédito -->
    <record id="action_credit_card_reconcile" model="ir.actions.act_window">
        <field name="name">Conciliación de tarjetas de crédito</field>
        <field name="res_model">credit.card.reconcile</field>
        <field name="view_mode">list,form</field>
    </record>

    <!-- Menú que lanza directamente la acción (sin actuar como contenedor) -->
    <menuitem id="menu_credit_card_reconcile_action"
            name="Conciliación de tarjetas de crédito"
            parent="menu_credit_card_reconcile_root"
            action="action_credit_card_reconcile"
            sequence="10"
            groups="account.group_account_invoice"/>

    <record id="action_account_cards_list" model="ir.actions.act_window">
        <field name="name">Tarjetas de Crédito</field>
        <field name="res_model">account.cards</field>
        <field name="view_mode">list,form</field>
        <field name="view_id" ref="view_account_cards_list"/>
        <field name="target">current</field>
    </record>

    <menuitem id="menu_account_cards_action"
          name="Tarjetas de Crédito"
          parent="account.menu_finance_configuration"
          action="action_account_cards_list"
          sequence="101"/>

    <record id="action_credit_card_reconcile_line_list" model="ir.actions.act_window">
        <field name="name">Análisis de conciliación</field>
        <field name="res_model">credit.card.reconcile.line</field>
        <field name="view_mode">list,form</field>
        <field name="domain">[('credit_card_reconcile_id.state', '=', 'done')]</field>
        <field name="view_id" eval="False"/>
    </record>

    <menuitem id="menu_credit_card_reconcile_line_report"
          name="Análisis de conciliación"
          parent="menu_credit_card_reconcile_root"
          action="action_credit_card_reconcile_line_list"
          sequence="20"
          groups="account.group_account_invoice"/>

</odoo>
